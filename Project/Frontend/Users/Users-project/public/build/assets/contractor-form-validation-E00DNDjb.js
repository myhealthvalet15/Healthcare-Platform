document.addEventListener("DOMContentLoaded",function(){const a=document.querySelector("#addNewModal");if(a){const e=a.querySelector("#addNewForm"),t=e.querySelector("#add_active_status"),o=e.querySelector(".status-label"),n=document.querySelector("#saveChangesButton");t&&o&&t.addEventListener("change",function(){o.textContent=t.checked?"Active":"Inactive"});const s=FormValidation.formValidation(e,{fields:{contractor_name:{validators:{notEmpty:{message:"The contractor name is required"},stringLength:{min:3,max:50,message:"Contractor name must be between 3 and 50 characters long"},regexp:{regexp:/^[a-zA-Z0-9 ]+$/,message:"Contractor name can only contain alphanumeric characters and spaces"}}},contractor_email:{validators:{notEmpty:{message:"The contractor email is required"},emailAddress:{message:"The value is not a valid email address"}}},contractor_address:{validators:{notEmpty:{message:"The contractor address is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap5:new FormValidation.plugins.Bootstrap5({eleInvalidClass:"is-invalid",eleValidClass:"is-valid",rowSelector:".col-sm-12"}),autoFocus:new FormValidation.plugins.AutoFocus,submitButton:new FormValidation.plugins.SubmitButton}});n&&n.addEventListener("click",function(i){i.preventDefault(),s.validate().then(function(c){if(c==="Invalid"){console.warn("Form validation failed. Please check the form for errors.");return}const r=new FormData(e);r.append("_token","{{ csrf_token() }}"),$.ajax({url:e.getAttribute("action"),method:"POST",data:r,processData:!1,contentType:!1,success:function(d){showToast("success","Contractor Added successfully!"),location.reload()},error:function(d,l){showToast("Failed to add contractor. Please try again.")}})})})}});
